<div class="modal-header">
    <h3>Delete Dataset</h3>
</div>
<div class="modal-body">
  <li>
    <h5>
      <a
          class="preview"
          title="View content in File Browser"
          ng-href="data_sets/{{ modal.dataSet.uuid }}"
          ng-bind-html="modal.dataSet.title"
          refinery-tooltip
          refinery-tooltip-placement="right"
          refinery-tooltip-delay-show="750"
          refinery-tooltip-delay-hide="150"
          refinery-tooltip-hide-on-click="true">
      </a>
    </h5>
  </li>
  <div ng-if="modal.dataSet.analyses.length != 0">
    <p ng-if="modal.deletionMessage == null" class="deletion-message">
      <b>The following {{ modal.dataSet.analyses.length }} {{ modal.dataSet
      .analyses.length > 1 ? 'Analyses' : 'Analysis' }} will be
        deleted!</b>
    </p>
    <p ng-if="modal.deletionMessage != null" class="deletion-message">
      <b>The following {{ modal.dataSet.analyses.length }} {{ modal.dataSet
      .analyses.length > 1 ? 'Analyses have' : 'Analysis has' }} successfully
        been deleted!</b>
    </p>
    <div id="related-analyses">
      <ul>
        <li ng-if="modal.deletionMessage == null"
        ng-repeat="analysis in modal.dataSet.analyses">
            <span class="spinner">
              <i
                class="analyses-status {{ analysis.status | analysisStatusIcon }}"
                title="{{ analysis.status | analysisStatusTitle }}"
                refinery-tooltip
                refinery-tooltip-placement="left">
              </i>
            </span>
            <i
              class="fa fa-user"
              title="You ran this analysis"
              ng-if="analysis.is_owner"
              refinery-tooltip
              refinery-tooltip-placement="top">

            </i>
            <i
              class="fa fa-users icon-shared-in"
              title="Some collaborator ran this analysis"
              ng-if="!analysis.is_owner"
              refinery-tooltip
              refinery-tooltip-placement="top">

            </i>
          <span ng-switch on="analysis.status">
              <span ng-if="SUCCESS">
                <a
                ng-href="/data_sets/{{analysis.data_set__uuid}}/analysis/{{analysis.uuid}}">
                {{ analysis.name }}
              </a>
              </span>
              <span ng-if="!SUCCESS">
                <a
                ng-href="/data_sets/{{analysis.data_set__uuid}}/#/analyses">
                {{ analysis.name }}
              </a>
              </span>
            </span>

        </li>
        <li ng-if="modal.deletionMessage != null"
        ng-repeat="analysis in modal.dataSet.analyses">
          <span class="spinner">
              <i
                class="analyses-status {{ analysis.status | analysisStatusIcon }}"
                title="{{ analysis.status | analysisStatusTitle }}"
                refinery-tooltip
                refinery-tooltip-placement="left">
              </i>
            </span>
            <i
              class="fa fa-user"
              title="You ran this analysis"
              ng-if="analysis.is_owner"
              refinery-tooltip
              refinery-tooltip-placement="top">

            </i>
            <i
              class="fa fa-users icon-shared-in"
              title="Some collaborator ran this analysis"
              ng-if="!analysis.is_owner"
              refinery-tooltip
              refinery-tooltip-placement="top">

            </i>
            <span>
                {{ analysis.name }}
            </span>

        </li>
      </ul>
    </div>
  </div>
</div>
<div class="modal-footer">
  <div class="text-align-left">
    <p class="deletion-message" ng-if="modal.deletionMessage != null">
      <b id="deletion-message-text">{{modal.deletionMessage}}</b>
    </p>
    <div class="refinery-spinner" ng-if="modal.isDeleting"></div>
  </div>
  <div class="text-align-right">
    <button id="dataset-delete-close-button"
      class="refinery-base btn btn-default"
      ng-if="modal.deletionMessage != null"
      ng-click="modal.cancel()">
      Close
    </button>
    <button id="dataset-delete-cancel-button"
      class="refinery-base btn btn-default"
      ng-if="modal.deletionMessage == null"
      ng-click="modal.cancel()">
      Cancel
    </button>
    <button id="dataset-delete-button"
      class="btn btn-danger"
      ng-if="modal.deletionMessage == null"
      ng-click="modal.delete()">
      Delete
    </button>
  </div>
</div>