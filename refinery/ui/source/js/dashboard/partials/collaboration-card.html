<div class="refinery-panel">
    <div class="refinery-header">
      <div>
        <h3>
          <i class="m-r-1-4 fa fa-users"></i> Collaboration
          <span class="p-l-1">
            <a
              ng-click="$ctrl.openGroupAdd()"
              class="no-underline btn priority-button">
              <i class="fa fa-plus-circle"></i>
              Add Group
            </a>
          </span>
        </h3>
      </div>
    </div>
    <div
      id="events-panel"
      class="refinery-panel-content card-sub-header">
      <ul class="list-unstyled p-b-1">
        <li class="col-md-6 underline-text">Group</li>
        <li class="col-md-4 underline-text">Role</li>
        <li class="col-md-2 underline-text">Edit</li>
      </ul>
       <ul class="list-unstyled">
         <li
           ng-repeat="group in $ctrl.userGroups"
           class="font-awesome-toggle-panel m-b-1 p-b-1">
             <a
               type="button"
               data-toggle="collapse"
               class="col-md-6"
               data-target="#{{group.uuid}}"
               aria-expanded="false" aria-controls="collapseOne">
               &nbsp;{{ group.name }}
             </a>
              <div class="col-md-4">
                 <span ng-if="group.can_edit">Manager</span>
              </div>
              <div class="col-md-2" ng-show="group.name !== 'Public'">
                <a
                  ng-click="$ctrl.openGroupEditor(group)"
                  class="no-underline">
                  <i class="fa fa-cog"></i>
                </a>
                 <a ng-if="group.can_edit"
                  href="#/{{ collab.activeGroup.uuid }}/"
                  ng-click="$ctrl.openGroupMemberAdd(group)"
                  class="no-underline">
                   <span
                     class="fa-stack"
                     refinery-tooltip
                     refinery-tooltip-container="body"
                     refinery-tooltip-placement="right"
                     title="Invite user to group">
                     <i class="fa fa-plus-circle fa-stack-1x fa-stack-right-corner"></i>
                     <i class="fa fa-user-o fa-stack-1-25x"></i>&nbsp;
                   </span>
                </a>
              </div>

         <div
           id="{{group.uuid}}"
           class="collapse"
           aria-expanded="true"
           aria-labelledby="headingOne"
           data-parent="#accordion">
           <div class="card-body">
              <ul class="list-unstyled m-t-1 p-t-1 m-b-1 m-b-1">
                <li ng-repeat="member in group.member_list" class="p-t-1">
                  <a
                    ng-href="users/{{ member.uuid }}"
                    ng-class="{'col-md-6': member.is_manager, 'col-md-10': !member.is_manager}">
                    <span ng-if="member.last_name">
                      {{ member.first_name }} {{ member.last_name }}
                    </span>
                    <span ng-if="!member.last_name">
                      {{ member.username }}
                    </span>
                  </a>
                  <span class="col-md-4" ng-if="member.is_manager">
                    Manager
                  </span>
                  <span ng-if="group.can_edit" class="col-md-2">
                    <a
                      ng-click="$ctrl.openGroupMemberEditor(member, group.member_list.length, group)">
                      <i class="fa fa-cog"></i>
                    </a>
                  </span>
                </li>
                <li ng-repeat="invite in $ctrl.invitations[group.id]" class="p-t-1">
                  <span class="col-md-6">
                    {{ invite.recipient_email }}
                  </span>
                  <span ng-if="group.can_edit" class="col-md-offset-3
                  col-md-3">
                    <a ng-click="$ctrl.revokeInvitation(invite.token_uuid)">
                      Revoke
                    </a>
                    <a ng-click="$ctrl.resendInvitation(invite.token_uuid)" class="p-l-1">
                      Resend
                    </a>
                  </span>
                </li>
              </ul>
           </div>
          </div>
         </li>
       </ul>
    </div>
  </div>
